<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simuladores - Aprovação Psycho</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #100f1c;
            --bg-card: #1c1b29;
            --primary-purple: #9f54ff;
            --accent-pink: #ff00ff;
            --accent-blue: #00c2ff;
            --text-light: #f0f0f0;
            --text-dark: #a0a0a0;
        }

        /* Featured card and hero accent styles */
        .hero-accent {
            height: 8px;
            width: 220px;
            margin: 12px auto 28px;
            border-radius: 999px;
            background: linear-gradient(90deg, rgba(159, 84, 255, 0.9), rgba(0, 194, 255, 0.9), rgba(255, 0, 255, 0.9));
            box-shadow: 0 4px 24px rgba(159, 84, 255, 0.12);
            animation: slideHue 6s linear infinite;
        }

        @keyframes slideHue {
            0% {
                filter: hue-rotate(0deg)
            }

            50% {
                filter: hue-rotate(45deg)
            }

            100% {
                filter: hue-rotate(0deg)
            }
        }

        .featured-card {
            background: linear-gradient(135deg, rgba(159, 84, 255, 0.12), rgba(0, 194, 255, 0.08));
            border: 1px solid rgba(159, 84, 255, 0.22);
            box-shadow: 0 8px 40px rgba(159, 84, 255, 0.12);
            transform: translateY(0);
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }

        .featured-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 18px 60px rgba(159, 84, 255, 0.18);
        }

        .pulse-ring {
            position: absolute;
            inset: -6px;
            border-radius: 0.75rem;
            background: radial-gradient(circle at 20% 20%, rgba(159, 84, 255, 0.12), transparent 20%), radial-gradient(circle at 80% 80%, rgba(0, 194, 255, 0.08), transparent 25%);
            pointer-events: none;
            filter: blur(6px);
            opacity: 0.9;
        }

        .badge-external {
            position: absolute;
            right: 12px;
            top: 12px;
            background: linear-gradient(90deg, #ff8bf0, #7ad3ff);
            color: #0b0b0b;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.75rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
        }

        .featured-cta {
            background: linear-gradient(90deg, var(--primary-purple), var(--accent-blue));
            color: #fff;
            box-shadow: 0 8px 24px rgba(159, 84, 255, 0.18);
        }

        .featured-cta:hover {
            opacity: 0.95;
            transform: translateY(-2px);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }

        .section-title {
            font-weight: 900;
            color: var(--text-light);
        }

        .section-subtitle {
            color: var(--primary-purple);
        }

        .card {
            background-color: var(--bg-card);
            border-radius: 0.75rem;
            border: 1px solid #333;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(159, 84, 255, 0.3);
            border-color: var(--primary-purple);
        }

        .cta-button {
            transition: all 0.3s ease;
            background-color: var(--accent-pink);
            color: var(--text-light);
            border: 2px solid var(--accent-pink);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.4);
        }

        .cta-button:hover {
            background-color: transparent;
            color: var(--accent-pink);
        }

        .bfp-scale-option {
            border: 2px solid #333;
            transition: all 0.2s ease-in-out;
        }

        .bfp-scale-option.selected {
            border-color: var(--accent-pink);
            background-color: #ff00ff20;
            transform: scale(1.05);
        }

        .pattern-grid-item {
            transition: all 0.2s ease;
            border: 1px solid #333;
            background-color: var(--bg-dark);
        }

        .pattern-grid-item.selected-correct {
            background-color: #00ff0030;
            border-color: #00ff00;
            transform: scale(1.05);
        }

        .pattern-grid-item.selected-incorrect {
            background-color: #ff000030;
            border-color: #ff0000;
            transform: scale(1.05);
        }

        .mvr-grid-item {
            transition: all 0.2s ease;
            border: 2px solid #333;
        }

        .mvr-grid-item.selected {
            border-color: var(--accent-blue);
            background-color: #00c2ff20;
            transform: scale(1.05);
        }

        /* Nav active state */
        .nav-active {
            color: var(--accent-pink) !important;
            text-shadow: 0 0 10px var(--accent-pink), 0 0 24px rgba(255, 0, 255, .25);
            font-weight: 800
        }

        [x-cloak] {
            display: none !important;
        }
    </style>
</head>

<body x-data="{ currentSimulator: 'selection' }">

    <!-- Header (unificado) -->
    <header class="sticky top-0 z-50 bg-black/40 backdrop-blur-md border-b border-white/10">
        <nav class="mx-auto max-w-7xl px-5 xl:px-8 py-3 flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-3" aria-label="Página inicial">
                <img src="Imagens_base/logo-principal.png" alt="Logo Aprovação Psycho" class="h-10 w-auto" loading="lazy" />
                <span class="text-[1.1rem] sm:text-xl font-black" style="color: var(--text-light);">APROVAÇÃO <span
                        style="color: var(--accent-pink); filter: drop-shadow(0 0 8px rgba(255,0,255,.7));">PSYCHO</span></span>
            </a>

            <div class="hidden md:flex items-center gap-7 text-sm">
                <a href="index.html#sobre" class="text-[var(--accent-pink)] font-semibold">O Curso</a>
                <a href="equipe.html" class="text-[var(--text-dark)] hover:text-white">Nossa Equipe</a>
                <a href="galeria.html" class="text-[var(--text-dark)] hover:text-white">Galeria</a>
                <a href="membros.html" class="text-[var(--text-dark)] hover:text-white">Área de Membros</a>
                <a href="dicas.html" class="text-[var(--text-dark)] hover:text-white">Dicas de Testes</a>
                <a href="simuladores.html" class="text-[var(--text-dark)] hover:text-white">Simuladores</a>
            </div>

            <button id="menu-btn"
                class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg text-white/90 hover:text-white border border-white/15">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </nav>

        <div id="mobile-menu" class="md:hidden hidden border-t border-white/10 bg-black/60 backdrop-blur-lg">
            <div class="mx-auto max-w-7xl px-5 xl:px-8 py-3 grid gap-1 text-sm">
                <a class="py-2 text-[var(--accent-pink)] font-semibold" href="index.html#sobre">O Curso</a>
                <a class="py-2 text-[var(--text-dark)] hover:text-white" href="equipe.html">Nossa Equipe</a>
                <a class="py-2 text-[var(--text-dark)] hover:text-white" href="galeria.html">Galeria</a>
                <a class="py-2 text-white" href="membros.html">Área de Membros</a>
                <a class="py-2 text-[var(--text-dark)] hover:text-white" href="dicas.html">Dicas de Testes</a>
                <a class="py-2 text-[var(--text-dark)] hover:text-white" href="simuladores.html">Simuladores</a>
                <a class="py-2"
                    href="https://wa.me/5585991982168?text=Ol%C3%A1!%20Quero%20saber%20mais%20sobre%20a%20Mentoria%20Aprova%C3%A7%C3%A3o%20Psycho."
                    target="_blank" rel="noopener">WhatsApp</a>
            </div>
        </div>
    </header>

    <!-- Simulator Selection View -->
    <div x-show="currentSimulator === 'selection'" x-transition.opacity>
        <main class="py-20">
            <div class="container mx-auto px-6">
                <h1 class="text-3xl md:text-4xl text-center mb-2 section-title">Nossos Simuladores Gratuitos</h1>
                <p class="text-center section-subtitle mb-4">Tenha uma prévia do que você aprenderá na mentoria.</p>
                <div class="hero-accent" aria-hidden="true"></div>

                <!-- Featured palográfico removed; replaced by simple card in the grid below -->

                <!-- Outros simuladores abaixo -->
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
                    <div @click="currentSimulator = 'bfp'" class="p-8 card text-center cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-text-light">Amostra do Teste BFP</h3>
                        <p class="text-text-dark mb-6">Responda 10 questões e receba uma análise preliminar do seu
                            perfil.</p>
                        <span
                            class="inline-block bg-primary-purple text-text-light font-semibold py-2 px-6 rounded-md">Acessar
                            Simulador</span>
                    </div>

                    <a href="pattern.html" class="p-8 card text-center">
                        <h3 class="text-2xl font-bold mb-3 text-text-light">Simulador de Atenção</h3>
                        <p class="text-text-dark mb-6">Encontre os padrões idênticos ao modelo e teste sua atenção
                            seletiva.</p>
                        <span
                            class="inline-block bg-primary-purple text-text-light font-semibold py-2 px-6 rounded-md">Acessar
                            Simulador</span>
                    </a>
                    <a href="memf.html" class="p-8 card text-center">
                        <h3 class="text-2xl font-bold mb-3 text-text-light">Simulador Memória dos Rostos</h3>
                        <p class="text-text-dark mb-6">Memorize rostos em pares e identifique-os entre outros. Desafie
                            sua memória visual.</p>
                        <span
                            class="inline-block bg-primary-purple text-text-light font-semibold py-2 px-6 rounded-md">Acessar
                            Simulador</span>
                    </a>
                    <div @click="currentSimulator = 'interview'" class="p-8 card text-center cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-text-light">Entrevista com IA</h3>
                        <p class="text-text-dark mb-6">Receba um feedback instantâneo da nossa IA para a pergunta mais
                            comum.</p>
                        <span
                            class="inline-block bg-primary-purple text-text-light font-semibold py-2 px-6 rounded-md">Acessar
                            Simulador</span>
                    </div>
                    <!-- Cartão de NOR removido daqui; está disponível em palografico.html -->
                </div>
            </div>
        </main>
    </div>

    <!-- A calculadora de NOR foi transferida para palografico.html para reduzir o peso inicial da página -->

    <!-- BFP Simulator View -->
    <div x-show="currentSimulator === 'bfp'" x-cloak x-transition.opacity>
        <main class="py-12 md:py-20">
            <div class="container mx-auto px-6">
                <button @click="currentSimulator = 'selection'"
                    class="mb-8 inline-flex items-center text-accent-pink hover:text-white font-semibold">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Voltar para Seleção
                </button>
                <div class="mb-10 text-center">
                    <h1 class="text-3xl md:text-4xl font-extrabold text-text-light">Amostra do Teste de Personalidade
                        (BFP)</h1>
                    <p class="mt-4 text-lg text-text-dark max-w-3xl mx-auto">Responda às 10 questões para ter uma prévia
                        da sua avaliação.</p>
                </div>
                <div x-data="bfpSimulator()"
                    class="max-w-4xl mx-auto p-6 md:p-8 rounded-lg shadow-lg bg-bg-card text-text-light">
                    <div x-show="state === 'instructions'">
                        <h4 class="text-xl font-bold text-center mb-4">Instruções da Amostra BFP</h4>
                        <ul class="list-disc list-inside bg-bg-dark p-4 rounded-md text-text-dark space-y-2 mb-8">
                            <li>Serão apresentadas <strong>10 frases</strong>.</li>
                            <li>Você terá <strong>3 minutos</strong> para responder.</li>
                            <li>Para cada uma, indique o quanto você concorda usando a escala de 1 a 7.</li>
                        </ul>
                        <button @click="startTest()" class="w-full cta-button font-bold py-3 px-6 rounded-md text-lg">
                            Iniciar Amostra
                        </button>
                    </div>
                    <div x-show="state === 'testing'">
                        <div class="flex justify-between items-center mb-4">
                            <span class="font-bold text-lg" x-text="`Questão ${currentQuestionIndex + 1} de 10`"></span>
                            <span class="font-semibold tabular-nums text-red-400" x-text="timer">03:00</span>
                        </div>
                        <div class="w-full bg-[#333] rounded-full h-2.5 mb-6">
                            <div class="bg-accent-pink h-2.5 rounded-full"
                                :style="`width: ${((currentQuestionIndex + 1) / 10) * 100}%`"></div>
                        </div>
                        <p class="text-center text-xl font-semibold my-6 min-h-[6rem] flex items-center justify-center"
                            x-text="questions[currentQuestionIndex]?.text"></p>
                        <div class="grid grid-cols-2 md:grid-cols-7 gap-2 text-center mb-8">
                            <template x-for="i in 7" :key="i">
                                <div @click="selectAnswer(i)"
                                    :class="{ 'selected': answers[questions[currentQuestionIndex]?.id] === i }"
                                    class="bfp-scale-option p-3 rounded-lg cursor-pointer">
                                    <span class="font-bold text-lg" x-text="i"></span>
                                    <span class="text-xs block text-text-dark" x-text="scaleLabels[i-1]"></span>
                                </div>
                            </template>
                        </div>
                        <div class="flex justify-between">
                            <button @click="prevQuestion()" :disabled="currentQuestionIndex === 0"
                                class="px-6 py-2 bg-[#333] text-text-light rounded-md disabled:opacity-50">Anterior</button>
                            <button x-show="currentQuestionIndex < 9" @click="nextQuestion()"
                                :disabled="!answers[questions[currentQuestionIndex]?.id]"
                                class="px-6 py-2 bg-primary-purple text-white font-semibold rounded-md disabled:opacity-50">Próxima</button>
                            <button x-show="currentQuestionIndex === 9" @click="showPreviewResults()"
                                :disabled="Object.keys(answers).length !== 10"
                                class="px-6 py-2 bg-accent-blue text-white font-semibold rounded-md disabled:opacity-50">Finalizar</button>
                        </div>
                    </div>
                    <div x-show="state === 'results'">
                        <h4 class="text-2xl font-bold text-center mb-4">Sua Análise Preliminar</h4>
                        <div class="space-y-4 mb-6">
                            <div class="bg-green-500/10 border-l-4 border-green-500 text-text-light p-4">
                                <p class="font-bold text-green-400">Pontos Fortes</p>
                                <p>Suas respostas indicam traços de <strong>sociabilidade</strong> e <strong>respeito às
                                        regras</strong>, características positivas para o perfil policial.</p>
                            </div>
                            <div class="bg-red-500/10 border-l-4 border-red-500 text-text-light p-4">
                                <p class="font-bold text-red-400">Pontos de Atenção</p>
                                <p>Algumas respostas podem sugerir uma tendência à <strong>impulsividade</strong> ou
                                    <strong>dificuldade em perdoar</strong>, traços que precisam de ser bem
                                    administrados na carreira.</p>
                            </div>
                        </div>
                        <div class="bg-yellow-500/10 border-l-4 border-yellow-400 p-4 my-6">
                            <p class="font-bold text-yellow-400">Quer uma análise completa e detalhada?</p>
                            <p class="text-sm text-text-dark">O teste completo avalia 5 grandes fatores da personalidade
                                através de 126 questões. Entender seu perfil em detalhes é crucial para a aprovação.</p>
                        </div>
                        <a href="https://wa.me/5585991982168?text=Olá!%20Fiz%20a%20amostra%20do%20teste%20BFP%20e%20gostaria%20de%20saber%20mais%20sobre%20a%20análise%20completa%20e%20a%20mentoria."
                            target="_blank"
                            class="w-full cta-button font-bold py-3 px-6 rounded-md text-lg inline-flex items-center justify-center">
                            Falar com Especialista
                        </a>
                        <button @click="resetTest()" class="w-full mt-4 text-sm text-text-dark hover:underline">Refazer
                            Amostra</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Pattern moved to pattern.html to reduce initial page weight -->

    <!-- Memória F moved to memf.html to reduce initial page weight -->

    <!-- Interview Simulator View -->
    <div x-show="currentSimulator === 'interview'" x-cloak x-transition.opacity>
        <main class="py-12 md:py-20">
            <div class="container mx-auto px-6">
                <button @click="currentSimulator = 'selection'"
                    class="mb-8 inline-flex items-center text-accent-pink hover:text-white font-semibold">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/0/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Voltar para Seleção
                </button>
                <div class="mb-10 text-center">
                    <h1 class="text-3xl md:text-4xl font-extrabold text-text-light">✨ Simulador de Entrevista com IA
                    </h1>
                    <p class="mt-4 text-lg text-text-dark max-w-3xl mx-auto">Receba um feedback instantâneo da nossa IA
                        para a pergunta mais comum da entrevista.</p>
                </div>
                <div x-data="interviewSimulator()"
                    class="max-w-3xl mx-auto p-6 md:p-8 border border-[#333] rounded-lg shadow-lg bg-bg-card">
                    <label class="block font-bold text-lg mb-2 text-text-light">Pergunta da Entrevista:</label>
                    <p class="mb-4 text-text-dark p-3 bg-bg-dark rounded-md">"Por que você deseja seguir a carreira
                        policial?"</p>
                    <label for="user-answer" class="block font-bold text-lg mb-2 text-text-light">Sua Resposta:</label>
                    <textarea id="user-answer" x-model="userInput" rows="6"
                        class="w-full p-3 border bg-bg-dark border-[#333] rounded-md focus:ring-2 focus:ring-accent-pink focus:border-accent-pink transition text-text-light"
                        placeholder="Digite sua resposta aqui..."></textarea>
                    <button @click="getFeedback()" :disabled="loading || feedback"
                        class="mt-6 w-full cta-button font-bold py-3 px-6 rounded-md text-lg inline-flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                        <span x-show="!loading">Analisar Minha Resposta</span>
                        <span x-show="loading" class="flex items-center">
                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                    stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor"
                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                </path>
                            </svg>
                            Analisando...
                        </span>
                    </button>
                    <div x-show="error" x-text="error" class="mt-4 p-3 bg-red-500/20 text-red-400 rounded-md"
                        style="display: none;"></div>
                    <div x-show="feedback" x-transition class="mt-8" style="display: none;">
                        <div class="p-6 bg-accent-blue/10 border border-accent-blue/20 rounded-lg">
                            <h3 class="font-bold text-xl mb-3 text-accent-blue">Feedback da IA:</h3>
                            <div x-html="feedback" class="prose max-w-none text-text-dark"></div>
                        </div>
                        <div class="text-center p-6 mt-6 bg-bg-dark rounded-lg border border-[#333]">
                            <h4 class="font-bold text-lg text-text-light">Gostou da análise?</h4>
                            <p class="text-text-dark my-2">Na mentoria completa, simulamos diversos cenários com análise
                                detalhada de um especialista.</p>
                            <a href="https://wa.me/5585991982168?text=Olá!%20Recebi%20o%20feedback%20da%20IA%20e%20quero%20saber%20mais%20sobre%20a%20preparação%20para%20a%20entrevista."
                                target="_blank"
                                class="mt-4 cta-button font-bold py-2 px-6 rounded-md inline-flex items-center justify-center">
                                Quero me preparar de verdade
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="border-t border-white/10 mt-auto py-8 bg-[#0f0e1a] text-center text-sm text-gray-600">
        &copy; <span x-data x-text="new Date().getFullYear()">2026</span> Aprovação Psycho. Todos direitos reservados.
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script>
        document.addEventListener('alpine:init', () => {
            // Interview Simulator data remains unchanged
            Alpine.data('interviewSimulator', () => ({
                userInput: '', loading: false, feedback: null, error: null,
                async getFeedback() {
                    if (!this.userInput.trim()) { this.error = 'Por favor, digite sua resposta antes de analisar.'; this.feedback = null; return; }
                    this.loading = true; this.feedback = null; this.error = null;
                    const systemPrompt = `Você é um psicólogo especialista em recrutamento para concursos policiais no Brasil. Sua tarefa é analisar a resposta de um candidato à pergunta da entrevista: "Por que você deseja seguir a carreira policial?". Forneça um feedback construtivo, estruturado e em português. Estruture sua resposta da seguinte forma, usando formatação Markdown:\n### Análise da Resposta\n**Pontos Fortes:**\n* [Liste 1 a 3 pontos positivos]\n**Pontos a Melhorar:**\n* [Liste 1 a 3 pontos a aprimorar]\n**Sugestão de Aprimoramento:**\n* [Ofereça uma sugestão concreta de como o candidato pode reformular a resposta.]\nSeja objetivo, profissional e encorajador.`;
                    const userQuery = `Analise a seguinte resposta: "${this.userInput}"`;
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, };
                    try {
                        const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (!response.ok) { throw new Error(`Erro na API: ${response.status}`); }
                        const result = await response.json();
                        const candidate = result.candidates?.[0];
                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            let htmlFeedback = candidate.content.parts[0].text;
                            htmlFeedback = htmlFeedback.replace(/### (.*)/g, '<h4 class="text-lg font-semibold mb-2 text-text-light">$1</h4>').replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold text-text-light">$1</strong>').replace(/\* (.*)/g, '<li>$1</li>').replace(/(<\/li>)\s*?(<li>)/g, '$1$2').replace(/(<li>.*<\/li>)/gs, '<ul class="list-disc ml-5 space-y-1">$1</ul>');
                            this.feedback = htmlFeedback;
                        } else { throw new Error('A resposta da IA está vazia ou em formato inesperado.'); }
                    } catch (e) {
                        console.error(e); this.error = 'Não foi possível obter o feedback no momento. Por favor, tente novamente mais tarde.';
                    } finally { this.loading = false; }
                }
            }));

            // BFP Simulator data remains unchanged
            Alpine.data('bfpSimulator', () => ({
                questions: [{ id: 1, text: "PROCURO SEGUIR AS REGRAS SOCIAIS SEM QUESTIONÁ-LAS", scale: "A2" }, { id: 2, text: "TENTO FAZER COM QUE AS PESSOAS SE SINTAM BEM", scale: "S1" }, { id: 3, text: "GOSTO DE FALAR SOBRE MIM", scale: "E2" }, { id: 4, text: "TENHO UM CORAÇÃO MOLE", scale: "S1" }, { id: 5, text: "FALO TUDO QUE PENSO", scale: "E2" }, { id: 6, text: "GOSTO DE FAZER COISAS QUE NUNCA FIZ ANTES", scale: "A3" }, { id: 7, text: "ACREDITO QUE AS PESSOAS TÊM BOAS INTENÇÕES", scale: "S3" }, { id: 8, text: "SOU DIVERTIDO", scale: "E4" }, { id: 9, text: "TOMO CUIDADO COM O QUE FALO", scale: "R2" }, { id: 10, text: "DIFICILMENTE PERDOO", scale: "S3" }],
                state: 'instructions', currentQuestionIndex: 0, answers: {}, scaleLabels: ['Discordo totalmente', 'Discordo', 'Discordo em parte', 'Não concordo nem discordo', 'Concordo em parte', 'Concordo', 'Concordo totalmente'],
                timer: '03:00', timeLeft: 180, interval: null,
                startTest() {
                    this.state = 'testing';
                    this.timeLeft = 180;
                    this.interval = setInterval(() => {
                        this.timeLeft--;
                        const minutes = Math.floor(this.timeLeft / 60);
                        const seconds = this.timeLeft % 60;
                        this.timer = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                        if (this.timeLeft <= 0) {
                            this.showPreviewResults();
                        }
                    }, 1000);
                },
                resetTest() { this.state = 'instructions'; this.currentQuestionIndex = 0; this.answers = {}; clearInterval(this.interval); this.timer = '03:00'; },
                selectAnswer(value) { const questionId = this.questions[this.currentQuestionIndex].id; this.answers[questionId] = value; },
                nextQuestion() { if (this.currentQuestionIndex < this.questions.length - 1) { this.currentQuestionIndex++; } },
                prevQuestion() { if (this.currentQuestionIndex > 0) { this.currentQuestionIndex--; } },
                showPreviewResults() { this.state = 'results'; clearInterval(this.interval); }
            }));

            // Pattern simulator moved to pattern.html

            // MVR Simulator remains unchanged
            Alpine.data('mvrSimulator', () => ({
                state: 'instructions', timer: '00:00', timeLeft: 0, interval: null,
                symbols: [
                    { id: 1, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="22" cy="22" r="10"></circle></svg>' },
                    { id: 13, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 12l8-8 8 8-8 8-8-8z"></path></svg>' },
                    { id: 14, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 16l6-6H6l6 6z"></path></svg>' },
                    { id: 15, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>' },
                    { id: 16, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path></svg>' },
                    { id: 17, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"></path></svg>' },
                    { id: 18, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"></path></svg>' },
                    { id: 19, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 10a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9zm0-7a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"></path></svg>' },
                    { id: 20, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path></svg>' },
                    { id: 21, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V6h-1v9.5c0 1.38-1.12 2.5-2.5 2.5S9 16.88 9 15.5V5c0-2.21 1.79-4 4-4s4 1.79 4 4v11.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5V6h-1z"></path></svg>' },
                    { id: 22, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 8h-1.81c-.45-1.73-1.98-3-3.83-3-1.04 0-1.98.44-2.66 1.14-.68-.7-1.62-1.14-2.66-1.14-1.85 0-3.38 1.27-3.83 3H5c-1.1 0-2 .9-2 2v4c0 .75.4 1.41 1 1.73V19c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-3.27c.6-.32 1-.98 1-1.73v-4c0-1.1-.9-2-2-2zm-7 11h-2v-2h2v2zm-2-4h-2v-2h2v2zm6 0h-2v-2h2v2z"></path></svg>' },
                    { id: 23, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="3.2"/><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"></path></svg>' },
                    { id: 24, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"></path></svg>' },
                    { id: 25, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.16 2.83L3.51 9.87c-.88.66-1.1 1.89-.52 2.92l8.36 14.4c.59 1.03 1.86 1.34 2.88.75l8.65-7.04c.88-.66 1.1-1.89.52-2.92L14.04 3.58c-.58-1.03-1.85-1.34-2.88-.75z"></path></svg>' },
                    { id: 26, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L4 7v10l8 5 8-5V7l-8-5zm6 13.06L12 19.22l-6-3.16V8.94l6 3.16 6-3.16v6.12z"></path></svg>' },
                    { id: 27, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M11 2c-.51 2.31-1.28 4.4-2.17 6.24-1.27 2.63-2.07 5.03-2.07 6.76 0 3.73 3.13 6.64 6.74 6.24 3.49-.39 5.31-4.1 3.93-7.23-1.01-2.28-2.96-4.56-4.93-6.62C12.18 4.68 11.51 3.2 11 2z"></path></svg>' },
                    { id: 28, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 4h-3V2h-4v2H7c-1.66 0-3 1.34-3 3v9c0 .83.67 1.5 1.5 1.5S7 16.83 7 16v-9c0-.55.45-1 1-1h8c.55 0 1 .45 1 1v9c0 .83.67 1.5 1.5 1.5S20 16.83 20 16V7c0-1.66-1.34-3-3-3zM7 20h2v4H7zm8 0h2v4h-2z"></path></svg>' },
                    { id: 29, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg>' },
                    { id: 30, svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"></path></svg>' },
                ],
                memorizationSet: [], recognitionSet: [],
                hits: 0, errors: 0, omissions: 0,
                shuffle(array) {
                    for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                    }
                    return array;
                },
                setupTest() {
                    const shuffledSymbols = this.shuffle([...this.symbols]);
                    this.memorizationSet = shuffledSymbols.slice(0, 12).map(s => ({ ...s, isTarget: true }));
                    const distractors = shuffledSymbols.slice(12).map(s => ({ ...s, isTarget: false }));
                    this.recognitionSet = this.shuffle([...this.memorizationSet, ...distractors]).map(s => ({ ...s, selected: false }));
                },
                startTimer(duration, onEnd) {
                    this.timeLeft = duration;
                    const update = () => {
                        const minutes = Math.floor(this.timeLeft / 60);
                        const seconds = this.timeLeft % 60;
                        this.timer = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    };
                    update();
                    this.interval = setInterval(() => {
                        this.timeLeft--;
                        update();
                        if (this.timeLeft <= 0) {
                            clearInterval(this.interval);
                            onEnd();
                        }
                    }, 1000);
                },
                startMemorization() {
                    this.setupTest();
                    this.state = 'memorizing';
                    this.startTimer(60, () => this.startRecognition());
                },
                startRecognition() {
                    this.state = 'recognizing';
                    this.startTimer(60, () => this.endTest());
                },
                selectItem(item, index) {
                    if (this.state !== 'recognizing') return;
                    this.recognitionSet[index].selected = !this.recognitionSet[index].selected;
                },
                endTest() {
                    clearInterval(this.interval);
                    this.hits = this.recognitionSet.filter(item => item.isTarget && item.selected).length;
                    this.errors = this.recognitionSet.filter(item => !item.isTarget && item.selected).length;
                    this.omissions = this.memorizationSet.length - this.hits;
                    this.state = 'results';
                },
                resetTest() {
                    this.state = 'instructions';
                    this.hits = 0; this.errors = 0; this.omissions = 0;
                    this.timer = '00:00';
                    clearInterval(this.interval);
                },
                resultMessage() {
                    const score = this.hits - this.errors;
                    if (score >= 13) return { title: 'Memória Excelente!', message: 'Seu desempenho foi ótimo, com alta taxa de acertos e poucos erros. Você demonstrou uma excelente memória visual.' };
                    if (score >= 12) return { title: 'Bom Desempenho!', message: 'Você teve um bom resultado, mas pode melhorar a precisão para evitar erros ou omissões.' };
                    return { title: 'Precisa Treinar!', message: 'Seu resultado indica que é preciso praticar. A memorização de detalhes é uma habilidade que pode ser aprimorada.' };
                }
            }));
            // Memória F moved to memf.html

            // NOR Calculator removed from this page; it now lives on palografico.html

        });
    </script>

    <script>
        // Mobile menu toggle + mark nav active (uses .nav-active class defined in page styles)
        document.addEventListener('DOMContentLoaded', function () {
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            menuBtn?.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

            const current = (location.pathname.split('/').pop() || 'index.html');
            document.querySelectorAll('nav a[href]').forEach(a => {
                try {
                    const href = (a.getAttribute('href') || '').split('/').pop();
                    if (href === current) { a.classList.add('nav-active'); a.setAttribute('aria-current', 'page'); }
                } catch (e) { /* ignore */ }
            });
        });
    </script>

</body>

</html>