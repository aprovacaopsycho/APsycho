<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gest√£o Centralizada - Aprova√ß√£o Psycho</title>
  <meta name="robots" content="noindex,nofollow" />

  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://aprovacaopsycho.net https://raw.githubusercontent.com; connect-src 'self' https://aprovacaopsycho.net https://raw.githubusercontent.com; base-uri 'none'; form-action 'self'">

  <link rel="icon" type="image/png" href="../favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-dark': '#0f172a',
            'brand-panel': '#1e293b',
            'brand-input': '#334155',
            'brand-border': '#475569',
            'brand-blue': '#3b82f6',
            'brand-accent': '#f59e0b',
            'brand-success': '#22c55e',
            'brand-danger': '#ef4444'
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    ::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }

    body {
      font-family: 'Inter', sans-serif;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      transform: translateY(150%);
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      font-size: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .toast.show {
      transform: translateY(0);
    }
  </style>
</head>

<body class="bg-brand-dark text-slate-200 h-screen flex flex-col overflow-hidden">

  <!-- TOAST -->
  <div id="toast-container" class="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toast-message">Notifica√ß√£o</span>
  </div>

  <!-- LOGIN SCREEN -->
  <div id="gate"
    class="fixed inset-0 z-50 flex items-center justify-center bg-brand-dark bg-opacity-90 backdrop-blur-sm p-4">
    <div class="bg-brand-panel border border-brand-border rounded-xl shadow-2xl w-full max-w-md p-8">
      <div class="text-center mb-8">
        <i class="fas fa-lock text-brand-blue text-4xl mb-4"></i>
        <h2 class="text-2xl font-bold text-white">Acesso Restrito</h2>
        <p class="text-slate-400 text-sm mt-2">Painel Administrativo Unificado</p>
      </div>
      <div class="space-y-4">
        <div class="relative">
          <i class="fas fa-envelope absolute left-3 top-3 text-slate-500"></i>
          <input id="email" type="email" placeholder="admin@exemplo.com"
            class="w-full bg-brand-input border border-brand-border rounded-lg py-2.5 pl-10 pr-4 text-white outline-none focus:ring-2 focus:ring-brand-blue">
        </div>
        <div class="relative">
          <i class="fas fa-key absolute left-3 top-3 text-slate-500"></i>
          <input id="password" type="password" placeholder="Senha"
            class="w-full bg-brand-input border border-brand-border rounded-lg py-2.5 pl-10 pr-4 text-white outline-none focus:ring-2 focus:ring-brand-blue">
        </div>
        <button id="loginBtn"
          class="w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg shadow-lg transition-all mt-6">Entrar</button>
        <p id="gateMsg" class="hidden text-center text-sm p-3 rounded-lg bg-red-500/10 text-red-400 mt-4"></p>
      </div>
    </div>
  </div>

  <!-- MAIN APP LAYOUT -->
  <div id="app" class="hidden flex h-full">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-brand-panel border-r border-slate-700 flex flex-col shadow-2xl z-30 flex-shrink-0">
      <div class="p-6 border-b border-slate-700">
        <h1 class="text-lg font-bold text-white leading-tight">
          <span class="text-brand-blue">Aprova√ß√£o</span> Psycho
        </h1>
        <p class="text-[10px] text-slate-400 mt-1 uppercase tracking-widest">Admin Control v2.0</p>
      </div>

      <nav class="flex-1 p-4 space-y-2">
        <button onclick="switchSection('students')" id="nav-students"
          class="w-full text-left px-4 py-3 rounded-lg transition-all flex items-center gap-3 bg-brand-blue text-white shadow-lg shadow-blue-500/20">
          <i class="fas fa-users"></i>
          <span class="font-medium">Gest√£o de Alunos</span>
        </button>
        <button onclick="switchSection('psicodata')" id="nav-psicodata"
          class="w-full text-left px-4 py-3 rounded-lg transition-all flex items-center gap-3 text-slate-400 hover:bg-slate-800 hover:text-white">
          <i class="fas fa-brain"></i>
          <span class="font-medium">PsicoData (Testes)</span>
        </button>
        <button onclick="switchSection('turmas')" id="nav-turmas"
          class="w-full text-left px-4 py-3 rounded-lg transition-all flex items-center gap-3 text-slate-400 hover:bg-slate-800 hover:text-white">
          <i class="fas fa-layer-group"></i>
          <span class="font-medium">Gest√£o de Turmas</span>
        </button>
        <a href="aulas_admin.html" target="_blank"
          class="w-full text-left px-4 py-3 rounded-lg transition-all flex items-center gap-3 text-slate-400 hover:bg-slate-800 hover:text-white">
          <i class="fas fa-chalkboard-teacher"></i>
          <span class="font-medium">Gest√£o de Aulas</span>
        </a>
      </nav>

      <div class="p-4 border-t border-slate-700 bg-slate-800/50">
        <div class="mb-4">
          <p class="text-[10px] uppercase text-slate-500 font-bold mb-2">Cloud & Backup</p>
          <button id="btn-save-cloud"
            class="w-full bg-brand-success hover:bg-green-600 text-white text-xs font-bold py-2 rounded flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20 transition-all">
            <i class="fas fa-cloud-upload-alt"></i> Publicar Tudo
          </button>
          <button id="btn-load-cloud"
            class="w-full mt-2 text-slate-400 hover:text-white text-xs py-1 flex items-center justify-center gap-1 transition-all">
            <i class="fas fa-sync-alt"></i> Recarregar Nuvem
          </button>

          <div class="h-px bg-slate-700/50 my-3"></div>

          <div class="flex gap-2">
            <button id="btn-backup-local"
              class="flex-1 bg-slate-700 hover:bg-slate-600 text-white text-[10px] py-2 rounded flex flex-col items-center gap-1 transition-colors"
              title="Salvar Backup Local (JSON)">
              <i class="fas fa-download text-brand-blue"></i> Salvar Local
            </button>
            <button id="btn-restore-local"
              class="flex-1 bg-slate-700 hover:bg-slate-600 text-white text-[10px] py-2 rounded flex flex-col items-center gap-1 transition-colors"
              title="Restaurar Backup Local (JSON)">
              <i class="fas fa-upload text-brand-accent"></i> Ler Local
            </button>
            <input type="file" id="file-backup-local" accept=".json" class="hidden">
          </div>
        </div>
        <button id="logoutBtn"
          class="w-full text-xs text-red-400 hover:text-red-300 flex items-center justify-center gap-2 pt-2 border-t border-slate-700">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col relative overflow-hidden bg-brand-dark">

      <!-- SECTION: ALUNOS -->
      <section id="section-students" class="flex flex-col h-full p-6 space-y-6 overflow-y-auto">
        <!-- HEADER ALUNOS -->
        <div
          class="flex flex-col md:flex-row justify-between items-center bg-brand-panel border border-brand-border p-5 rounded-xl shadow-lg flex-shrink-0 gap-4">
          <div>
            <h2 class="text-xl font-bold text-white flex items-center gap-2">
              <i class="fas fa-user-graduate text-brand-blue"></i>
              Alunos Registrados
            </h2>
            <p class="text-xs text-slate-400 mt-1" id="label-count-students">0 alunos cadastrados</p>
          </div>

          <div class="flex gap-3 items-center">
            <button id="btn-delete-bulk" onclick="deleteBulk()"
              class="hidden bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all animate-fade-in">
              <i class="fas fa-trash"></i> Excluir Sele√ß√£o
            </button>

            <div class="h-8 w-px bg-slate-700 mx-2 hidden md:block"></div>

            <button onclick="fixCPFs()"
              class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all"
              title="Formatar CPFs (000...00 -> 000.000.000-00) inclusive com zero √† esquerda faltante">
              <i class="fas fa-magic"></i> Corrigir CPF
            </button>

            <button id="trigger-sheet"
              class="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-file-excel"></i> Importar Excel
            </button>
            <button id="btn-export-sheet"
              class="bg-brand-panel border border-brand-border hover:bg-slate-700 text-slate-300 hover:text-white px-4 py-2 rounded-lg font-medium shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-download"></i> Exportar
            </button>
            <button id="btn-download-hashes"
              class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-key"></i> Baixar Hashes
            </button>
            <input type="file" id="file-sheet" accept=".xlsx,.xls,.csv" class="hidden">
          </div>
        </div>

        <!-- ADD FORM -->
        <div class="bg-brand-panel border border-brand-border rounded-xl p-6 shadow-lg">
          <p class="text-xs text-slate-400 font-bold uppercase tracking-wider mb-3">Adicionar / Editar</p>
          <div
            class="grid grid-cols-1 md:grid-cols-12 gap-4 items-end bg-black/20 p-4 rounded-lg border border-slate-700/50">
            <div class="md:col-span-3">
              <label class="block text-[10px] text-slate-500 mb-1">Nome</label>
              <input id="new-name" placeholder="Nome Completo"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div class="md:col-span-3">
              <label class="block text-[10px] text-slate-500 mb-1">E-mail</label>
              <input id="new-email" placeholder="email@exemplo.com"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div class="md:col-span-2">
              <label class="block text-[10px] text-slate-500 mb-1">CPF</label>
              <input id="new-cpf" maxlength="14" placeholder="000.000.000-00"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div class="md:col-span-2">
              <label class="block text-[10px] text-slate-500 mb-1">Senha</label>
              <input id="new-key" placeholder="Inscri√ß√£o..."
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div class="md:col-span-2">
              <label class="block text-[10px] text-slate-500 mb-1">Validade (Opcional)</label>
              <input id="new-validity" type="datetime-local"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div class="md:col-span-12">
              <label class="block text-[10px] text-slate-500 mb-1">Permiss√µes de Acesso</label>
              <div id="permissions-container"
                class="flex flex-wrap gap-3 p-3 bg-slate-800 rounded border border-slate-700">
                <!-- Checkboxes populated by JS -->
                <label class="flex items-center gap-2 text-xs text-slate-300">
                  <input type="checkbox" value="PMPR"
                    class="perm-check w-4 h-4 rounded border-slate-600 bg-slate-700 text-brand-blue focus:ring-brand-blue">
                  PMPR (Padr√£o)
                </label>
              </div>
            </div>
            <div class="md:col-span-12 mt-2">
              <button id="btn-add"
                class="w-full bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 rounded text-sm h-[38px] ok">
                <i class="fas fa-plus mr-1"></i> Salvar Aluno
              </button>
            </div>
          </div>
        </div>

        <!-- TABLE -->
        <div
          class="bg-brand-panel border border-brand-border rounded-xl shadow-lg flex-1 flex flex-col overflow-hidden min-h-[300px]">
          <div class="overflow-auto flex-1">
            <table id="studentTable" class="w-full text-sm text-left text-slate-300">
              <thead class="text-xs text-slate-400 uppercase bg-slate-900 sticky top-0 shadow-sm z-10">
                <tr>
                  <th class="px-6 py-3 w-4">
                    <input type="checkbox" id="check-all-students" onclick="toggleSelectAll()"
                      class="w-4 h-4 rounded border-slate-600 bg-slate-700 text-brand-blue focus:ring-brand-blue">
                  </th>
                  <th class="px-6 py-3">Nome</th>
                  <th class="px-6 py-3">E-mail</th>
                  <th class="px-6 py-3">Turmas</th>
                  <th class="px-6 py-3">CPF</th>
                  <th class="px-6 py-3">Senha</th>
                  <th class="px-6 py-3">Validade</th>
                  <th class="px-6 py-3 text-right">A√ß√µes</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-700"></tbody>
            </table>
          </div>
        </div>

        <!-- API CONFIG HIDDEN DETAILS -->
        <details
          class="bg-brand-panel border border-brand-border rounded-lg opacity-50 hover:opacity-100 transition-opacity">
          <summary
            class="cursor-pointer p-3 text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 select-none">
            <i class="fas fa-cog"></i> Configs API
          </summary>
          <div class="p-4 pt-0 border-t border-slate-700/50 mt-2 grid grid-cols-1 md:grid-cols-2 gap-4">
            <input id="api-url" value="https://aprovacaopsycho.net/admin/api/put-hashes"
              class="bg-brand-input border border-brand-border rounded px-3 py-2 text-xs text-white outline-none">
            <input id="api-key" type="password" value="Apr0v@c@0_174"
              class="bg-brand-input border border-brand-border rounded px-3 py-2 text-xs text-white outline-none">
          </div>
        </details>
      </section>

      <!-- SECTION: PSICODATA -->
      <section id="section-psicodata" class="hidden flex flex-col h-full relative">

        <!-- PSICO HEADER -->
        <header
          class="bg-brand-panel border-b border-slate-700 p-6 flex justify-between items-center shadow-lg z-20 flex-shrink-0">
          <div class="flex items-center gap-4">
            <!-- Banca Select (Substituted Menu) -->
            <div class="relative">
              <select id="banca-select" onchange="selectBanca(this.value)"
                class="bg-slate-800 border border-slate-600 text-white text-lg font-bold rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-brand-blue outline-none appearance-none cursor-pointer">
                <!-- Options populated by JS -->
              </select>
              <i class="fas fa-chevron-down absolute right-3 top-4 text-slate-400 pointer-events-none"></i>
            </div>
            <div class="h-8 w-px bg-slate-700"></div>
            <p id="current-page-subtitle" class="text-slate-400 text-sm">...</p>
          </div>

          <div class="flex gap-3">
            <!-- NAV TABS -->
            <nav class="flex gap-2">
              <button id="nav-students" class="px-4 py-2 rounded-lg bg-brand-blue text-white font-medium transition-all"
                onclick="selectView('students')">
                <i class="fas fa-users-cog mr-2"></i> Alunos
              </button>
              <button id="nav-psicodata"
                class="px-4 py-2 rounded-lg hover:bg-brand-panel text-slate-400 hover:text-white font-medium transition-all"
                onclick="selectView('psicodata')">
                <i class="fas fa-brain mr-2"></i> PsicoData
              </button>
            </nav>
            <button onclick="selectManagerView()" id="btn-manager-view"
              class="text-slate-400 hover:text-white px-3 py-2 rounded hover:bg-slate-700 transition-colors text-sm font-medium">
              <i class="fas fa-table-list mr-1"></i> Cat√°logo
            </button>
            <button onclick="openModal('add')"
              class="bg-brand-blue hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all shadow-lg flex items-center gap-2 md:text-sm">
              <i class="fas fa-plus"></i> Novo Concurso
            </button>
          </div>
        </header>

        <!-- PSICO CONTENT CONTAINER -->
        <div class="flex-1 overflow-hidden relative">

          <!-- VIEW: BANCA CARDS -->
          <div id="view-banca" class="absolute inset-0 p-6 flex flex-col lg:flex-row gap-6 overflow-hidden">

            <!-- Coluna Esquerda: Filtros e Lista -->
            <div class="flex-1 flex flex-col min-h-0 gap-4">
              <!-- Filtros -->
              <div
                class="bg-brand-panel border border-slate-700 p-3 rounded-xl flex flex-col sm:flex-row gap-4 items-center shadow-md flex-shrink-0">
                <div class="flex-1 grid grid-cols-1 md:grid-cols-3 gap-4 w-full">
                  <select id="filter-year" onchange="applyFilters()"
                    class="bg-slate-800 border border-slate-600 text-white text-xs rounded-lg block w-full p-2 outline-none">
                    <option value="all">Todos os Anos</option>
                  </select>
                  <select id="filter-concurso" onchange="applyFilters()"
                    class="bg-slate-800 border border-slate-600 text-white text-xs rounded-lg block w-full p-2 outline-none">
                    <option value="all">Todos os Concursos</option>
                  </select>
                  <select id="filter-type" onchange="applyFilters()"
                    class="bg-slate-800 border border-slate-600 text-white text-xs rounded-lg block w-full p-2 outline-none">
                    <option value="all">Todos os Tipos</option>
                    <option value="Personalidade">üß† Personalidade</option>
                    <option value="Aten√ß√£o">üéØ Aten√ß√£o</option>
                    <option value="Racioc√≠nio">üí° Racioc√≠nio</option>
                    <option value="Mem√≥ria">üíæ Mem√≥ria</option>
                    <option value="Outros">‚ùì Outros</option>
                  </select>
                </div>
              </div>

              <!-- Lista Cards -->
              <div id="cards-container" class="flex-1 overflow-y-auto space-y-4 pr-2 pb-20"></div>
            </div>

            <!-- Coluna Direita: Stats -->
            <div class="w-full lg:w-80 flex-shrink-0 flex flex-col gap-4 hidden md:flex">
              <div
                class="bg-brand-panel border border-slate-700 rounded-xl p-4 shadow-lg flex flex-col h-full overflow-hidden">
                <h3 class="text-sm font-bold text-white mb-3 flex items-center gap-2">
                  <i class="fas fa-chart-pie text-brand-accent"></i> Estat√≠sticas
                </h3>

                <div id="stats-summary" class="grid grid-cols-2 gap-2 mb-3 pb-3 border-b border-slate-700">
                  <!-- JS Populated -->
                </div>

                <select id="filter-stats-type" onchange="applyStatsFilter()"
                  class="bg-slate-800 border border-slate-600 text-white text-xs rounded-lg block w-full p-2 mb-3">
                  <option value="all">Todos os Tipos</option>
                  <option value="Personalidade">üß† Personalidade</option>
                  <option value="Aten√ß√£o">üéØ Aten√ß√£o</option>
                  <option value="Racioc√≠nio">üí° Racioc√≠nio</option>
                  <option value="Mem√≥ria">üíæ Mem√≥ria</option>
                  <option value="Outros">‚ùì Outros</option>
                </select>

                <div class="flex-1 overflow-y-auto pr-1">
                  <div id="stats-container" class="space-y-2"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- VIEW: MANAGER TABLE -->
          <div id="view-manager" class="absolute inset-0 p-6 flex flex-col hidden bg-brand-dark z-20">
            <div
              class="bg-brand-panel border border-slate-700 p-4 rounded-xl mb-4 flex gap-4 items-center shadow-md flex-shrink-0">
              <i class="fas fa-search text-slate-400"></i>
              <input type="text" id="manager-search" onkeyup="renderManagerTable()" placeholder="Buscar teste..."
                class="bg-transparent border-none text-white w-full focus:ring-0 outline-none">
              <button onclick="closeManagerView()"
                class="text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded text-white">Voltar</button>
            </div>
            <div
              class="bg-brand-panel border border-slate-700 rounded-xl shadow-lg flex-1 overflow-hidden flex flex-col">
              <div class="overflow-y-auto flex-1">
                <table class="w-full text-sm text-left text-slate-300">
                  <thead class="text-xs uppercase bg-slate-900 text-slate-400 sticky top-0 z-10">
                    <tr>
                      <th class="px-6 py-4 w-1/3">Nome Original</th>
                      <th class="px-6 py-4 w-1/3">Sin√¥nimo</th>
                      <th class="px-6 py-4 w-1/3">Tipo</th>
                    </tr>
                  </thead>
                  <tbody id="manager-table-body" class="divide-y divide-slate-700"></tbody>
                </table>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- SECTION: TURMAS -->
      <section id="section-turmas" class="hidden flex flex-col h-full p-6 space-y-6 overflow-y-auto">
        <!-- HEADER TURMAS -->
        <div
          class="flex flex-col md:flex-row justify-between items-center bg-brand-panel border border-brand-border p-5 rounded-xl shadow-lg flex-shrink-0 gap-4">
          <div>
            <h2 class="text-xl font-bold text-white flex items-center gap-2">
              <i class="fas fa-layer-group text-brand-blue"></i>
              Turmas & Mentoria
            </h2>
            <p class="text-xs text-slate-400 mt-1" id="label-count-turmas">0 turmas cadastradas</p>
          </div>

          <div class="flex gap-3 items-center">
            <button onclick="saveTurmasLocal()"
              class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-save"></i> 1. Salvar DB Local
            </button>
            <button onclick="downloadSyncScript()"
              class="bg-slate-800 hover:bg-slate-700 text-slate-400 px-3 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all text-xs border border-slate-700">
              <i class="fas fa-terminal"></i> 2. Rodar Script
            </button>

            <div class="h-8 w-px bg-slate-700 mx-2 hidden md:block"></div>

            <button id="btn-import-turmas" onclick="importTurmas()"
              class="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-file-import"></i> Importar JSON
            </button>
            <button id="btn-export-turmas" onclick="exportTurmas()"
              class="bg-brand-panel border border-brand-border hover:bg-slate-700 text-slate-300 hover:text-white px-4 py-2 rounded-lg font-medium shadow-lg flex items-center gap-2 transition-all">
              <i class="fas fa-download"></i> Exportar
            </button>
            <input type="file" id="file-turmas" accept=".json" class="hidden">
          </div>
        </div>

        <!-- ADD FORM TURMAS -->
        <div class="bg-brand-panel border border-brand-border rounded-xl p-6 shadow-lg">
          <p class="text-xs text-slate-400 font-bold uppercase tracking-wider mb-3">Nova Turma</p>
          <div
            class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end bg-black/20 p-4 rounded-lg border border-slate-700/50">
            <div>
              <label class="block text-[10px] text-slate-500 mb-1">Nome da Turma (Exibi√ß√£o)</label>
              <input id="turma-nome" placeholder="Ex: Turma Bravo 2025"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div>
              <label class="block text-[10px] text-slate-500 mb-1">Nome da Pasta (Sem espa√ßos)</label>
              <input id="turma-pasta" placeholder="Ex: PMPR_2025"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div>
              <label class="block text-[10px] text-slate-500 mb-1">Imagem de Fundo (URL)</label>
              <input id="turma-imagem" placeholder="https://..."
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
            </div>
            <div>
              <label class="block text-[10px] text-slate-500 mb-1">Pasta Base (Clonagem)</label>
              <select id="turma-base"
                class="w-full bg-brand-input border border-brand-border rounded px-3 py-2 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue">
                <option value="Base">Base (Modelo)</option>
                <!-- Can be populated later -->
              </select>
            </div>
            <div>
              <div class="flex gap-2">
                <button id="btn-add-turma" onclick="addTurma()"
                  class="flex-1 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 rounded text-sm h-[38px]">
                  <i class="fas fa-plus mr-1"></i> Criar Cards
                </button>
                <button id="btn-delete-turma-form" onclick="deleteTurmaForm()"
                  class="hidden bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-3 rounded text-sm h-[38px]"
                  title="Excluir Turma">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
          <p class="text-[10px] text-slate-500 mt-2">
            <i class="fas fa-server text-brand-accent"></i>
            O <b class="text-white">Servidor de Automa√ß√£o</b> criar√° as pastas automaticamente se estiver rodando.
            Caso contr√°rio, execute o script manualmente.
          </p>
        </div>

        <!-- LISTA TURMAS -->
        <div id="turmas-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Cards populated by JS -->
        </div>
      </section>

    </main>
  </div>

  <!-- MODAL EDIT CONCURSO -->
  <div id="modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
    <div
      class="bg-brand-panel border border-slate-600 rounded-xl w-full max-w-lg shadow-2xl transform transition-all scale-100">
      <div class="p-6 border-b border-slate-700 flex justify-between items-center">
        <h3 id="modal-title" class="text-xl font-bold text-white">Concurso</h3>
        <button onclick="closeModal()" class="text-slate-400 hover:text-white"><i
            class="fas fa-times text-xl"></i></button>
      </div>
      <div class="p-6 space-y-4">
        <input type="hidden" id="modal-index">
        <div class="grid grid-cols-3 gap-4">
          <div class="col-span-1">
            <label class="block text-xs font-medium text-slate-400 mb-1">Ano</label>
            <input type="number" id="modal-ano"
              class="w-full bg-slate-800 border border-slate-600 rounded-lg p-2.5 text-white outline-none focus:ring-2 focus:ring-brand-blue">
          </div>
          <div class="col-span-2">
            <label class="block text-xs font-medium text-slate-400 mb-1">Nome</label>
            <input type="text" id="modal-concurso"
              class="w-full bg-slate-800 border border-slate-600 rounded-lg p-2.5 text-white outline-none focus:ring-2 focus:ring-brand-blue">
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-slate-400 mb-1">Testes do Concurso</label>
          <div class="bg-black/20 border border-slate-600 rounded-lg p-3 min-h-[150px] flex flex-col">
            <div id="modal-tests-list" class="flex-1 space-y-2 mb-3 max-h-[200px] overflow-y-auto pr-2">
              <!-- Tests will be rendered here -->
            </div>

            <div class="flex gap-2 pt-3 border-t border-slate-700/50">
              <input id="modal-new-test-input" placeholder="Novo teste..."
                class="flex-1 bg-slate-800 border border-slate-600 rounded px-3 py-1.5 text-sm text-white outline-none focus:ring-1 focus:ring-brand-blue"
                onkeypress="if(event.key === 'Enter') addTestToModal()">
              <button onclick="addTestToModal()"
                class="bg-brand-blue hover:bg-blue-600 text-white px-3 py-1.5 rounded transition-colors">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="p-6 border-t border-slate-700 bg-slate-800/30 flex justify-end gap-3 rounded-b-xl">
        <button onclick="closeModal()"
          class="px-4 py-2 text-slate-300 hover:text-white text-sm font-medium">Cancelar</button>
        <button onclick="saveTest()"
          class="bg-brand-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium shadow-lg text-sm">Salvar</button>
      </div>
    </div>
  </div>

  <script src="../assets/xlsx.full.min.js" defer></script>
  <script src="app.js?v=3" defer></script>
</body>

</html>