<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palogr√°fico - Aprova√ß√£o Psycho</title>
    <link rel="icon" type="image/png" href="../favicon.png">

    <!-- SEGURAN√áA -->
    <script src="../scripts/auth_guard.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #100f1c;
            --bg-card: #1c1b29;
            --primary-purple: #9f54ff;
            --accent-pink: #ff00ff;
            --accent-blue: #00c2ff;
            --text-light: #f0f0f0;
            --text-dark: #a0a0a0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }

        .hero-accent {
            height: 8px;
            width: 220px;
            margin: 12px auto 28px;
            border-radius: 999px;
            background: linear-gradient(90deg, rgba(159, 84, 255, 0.9), rgba(0, 194, 255, 0.9), rgba(255, 0, 255, 0.9));
            box-shadow: 0 4px 24px rgba(159, 84, 255, 0.12);
        }

        .card {
            background-color: var(--bg-card);
            border-radius: 0.75rem;
            border: 1px solid #333;
        }

        .featured-cta {
            background: linear-gradient(90deg, var(--primary-purple), var(--accent-blue));
            color: #fff;
        }

        .pulse-ring {
            position: absolute;
            inset: -6px;
            border-radius: 0.75rem;
            background: radial-gradient(circle at 20% 20%, rgba(159, 84, 255, 0.12), transparent 20%), radial-gradient(circle at 80% 80%, rgba(0, 194, 255, 0.08), transparent 25%);
            pointer-events: none;
            filter: blur(6px);
            opacity: 0.9;
        }

        .badge-external {
            position: absolute;
            right: 12px;
            top: 12px;
            background: linear-gradient(90deg, #ff8bf0, #7ad3ff);
            color: #0b0b0b;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.75rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
        }

        [x-cloak] {
            display: none !important;
        }

        /* ---- HERO (glass + grid) ---- */
        .hero-bg {
            position: relative;
            isolation: isolate;
            background-image: linear-gradient(180deg, rgba(15, 14, 26, .82), rgba(15, 14, 26, .94)), url('https://www.pmpr.pr.gov.br/sites/default/arquivos_restritos/files/imagem/2025-07/img_1121_0.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }

        .hero-bg::before {
            /* animated grid glow */
            content: "";
            position: absolute;
            inset: -10%;
            z-index: -1;
            opacity: .35;
            background:
                radial-gradient(600px 200px at 10% 0%, rgba(159, 84, 255, .18), transparent 60%),
                radial-gradient(600px 200px at 90% 20%, rgba(0, 194, 255, .18), transparent 60%),
                radial-gradient(1000px 400px at 50% 110%, rgba(255, 0, 255, .18), transparent 60%);
            filter: blur(40px);
            pointer-events: none
        }
    </style>
</head>

<body x-data="{ }" class="hero-bg">

    <!-- HEADER -->
    <header class="bg-black/40 backdrop-blur-md border-b border-white/10 sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="../logo-principal.png" alt="Logo" class="h-8">
                <img src="https://www.pmpr.pr.gov.br/sites/default/arquivos_restritos/files/imagem/2025-07/img_1121_0.jpg"
                    alt="Bras√£o Base"
                    class="h-10 w-10 rounded-full border border-[var(--primary-purple)] object-cover shadow-[0_0_10px_rgba(159,84,255,0.3)]">
                <div class="flex flex-col">
                    <span class="text-xl font-black" style="color:var(--text-light)">APROVA√á√ÉO <span
                            style="color:var(--accent-pink);text-shadow:0 0 8px var(--accent-pink)">PSYCHO</span></span>
                    <span class="text-white font-black text-lg leading-none">Base <span
                            class="text-[var(--accent-pink)]">2025</span></span>
                    <span class="text-[10px] text-gray-400 font-medium tracking-wider">M√ìDULO EXCLUSIVO</span>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <a href="testes_personalidade.html"
                    class="text-sm text-[var(--accent-blue)] hover:text-white flex items-center gap-2 font-bold transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                    </svg>
                    Voltar
                </a>
            </div>
        </div>
    </header>

    <main class="py-12 md:py-20">
        <div class="container mx-auto px-6 max-w-4xl">

            <div class="max-w-4xl mx-auto mb-10 px-4 lg:px-0">
                <div class="block p-8 card featured-card text-center hover:shadow-lg relative">
                    <div class="pulse-ring" aria-hidden="true"></div>
                    <span class="badge-external">Externo</span>
                    <div class="flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-accent-blue" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.77 9.77 0 01-4-.8L3 20l1.2-3.8A7.72 7.72 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                        </svg>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-bold mb-2 text-text-light">Corretor de Palogr√°ficos</h3>
                    <p class="text-text-dark mb-6">Abra o assistente que corrige palogr√°ficos. Escolha a vers√£o que
                        prefere: GPT ou Gemini. Nesta p√°gina tamb√©m est√° a Calculadora de NOR.</p>
                    <div class="flex items-center justify-center gap-4 mt-4">
                        <a href="https://chatgpt.com/g/g-68fd18c2fd3481918ea01c8e28b6cec1-corretor-de-palografico-aprovacao-psycho-2-0"
                            target="_blank" rel="noopener noreferrer"
                            class="inline-block featured-cta font-semibold py-3 px-6 rounded-md">Abrir no GPT</a>
                        <a href="https://gemini.google.com/gem/1cwzI-0H_VSOc_5TDDvtUsS9AiI39LOS7?usp=sharing"
                            target="_blank" rel="noopener noreferrer"
                            class="inline-block border-2 border-white/10 bg-gradient-to-r from-[#00C2FF] to-[#9F54FF] text-white font-semibold py-3 px-6 rounded-md">Abrir
                            no Gemini</a>
                    </div>
                </div>
            </div>

            <section class="mt-6">
                <h2 class="text-2xl font-extrabold text-text-light mb-3">Calculadora de NOR</h2>
                <p class="text-text-dark mb-6">Insira a quantidade de palos observados nos 5 intervalosüéØ.</p>

                <div x-data="norCalculator()" class="p-6 rounded-lg shadow-lg bg-bg-card text-text-light">

                    <!-- Gamified result banner -->
                    <div x-show="totalPalos > 0" class="mb-4 p-4 rounded-md" :class="bannerClass">
                        <div class="flex items-center justify-between gap-4">
                            <div>
                                <div class="text-sm text-text-dark">Seu resultado</div>
                                <div class="flex items-center gap-3">
                                    <div class="text-4xl font-extrabold" x-text="(nor).toFixed(2)">0.00</div>
                                    <div class="text-lg font-semibold" x-text="friendlyMessage"></div>
                                </div>
                                <div class="text-sm text-text-dark mt-1">Total de palos: <span
                                        class="font-bold text-text-light" x-text="totalPalos"></span> ‚Ä¢ Soma diffs:
                                    <span class="font-bold text-text-light" x-text="sumDiffs"></span>
                                </div>
                            </div>
                            <div class="w-48">
                                <div class="h-3 w-full bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-3 rounded-full" :style="`width: ${Math.min(nor,20)/20*100}%`"
                                        :class="progressClass"></div>
                                </div>
                                <div class="text-xs text-text-dark mt-2">Pontua√ß√£o: <span
                                        class="font-bold text-text-light" x-text="score"></span> ‚Ä¢ <span
                                        x-text="badge"></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-5 gap-3 mb-4">
                        <template x-for="(val, idx) in intervals" :key="idx">
                            <div>
                                <label class="block text-sm text-text-dark mb-1">Intervalo <span
                                        x-text="idx+1"></span></label>
                                <input type="number" min="0" step="1"
                                    class="w-full p-2 rounded-md bg-[#111] border border-[#333] text-text-light"
                                    x-model.number="intervals[idx]" @input="compute()" />
                            </div>
                        </template>
                    </div>

                    <div class="flex gap-3 mb-4">
                        <button @click="compute()" class="px-4 py-2 featured-cta rounded-md font-semibold">Calcular
                            NOR</button>
                        <button @click="reset()" class="px-4 py-2 bg-[#333] rounded-md">Limpar</button>
                    </div>

                    <div x-show="error" class="mb-4 p-3 bg-red-500/10 text-red-400 rounded-md" x-text="error"></div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-4 card">
                            <p class="text-sm text-text-dark">Total de Palos</p>
                            <p class="text-3xl font-bold text-text-light" x-text="totalPalos"></p>
                        </div>
                        <div class="p-4 card">
                            <p class="text-sm text-text-dark">NOR (pontos)</p>
                            <p class="text-3xl font-bold text-text-light" x-text="(nor).toFixed(2)"></p>
                        </div>
                    </div>

                    <div class="mt-4 p-4 card">
                        <p class="text-sm text-text-dark mb-2">Soma das diferen√ßas entre intervalos</p>
                        <p class="font-bold text-text-light mb-2" x-text="sumDiffs"></p>
                        <p class="text-sm text-text-dark mb-2">Diferen√ßas entre intervalos (adjacentes)</p>
                        <div class="flex gap-2 flex-wrap">
                            <template x-for="(d, i) in diffs" :key="i">
                                <span class="px-3 py-1 bg-[#111] border border-[#333] rounded-md text-text-light">D<span
                                        x-text="i+1"></span>: <span x-text="d"></span></span>
                            </template>
                        </div>
                    </div>

                    <div class="mt-4 p-4 card">
                        <p class="text-sm text-text-dark">Classifica√ß√£o</p>
                        <p class="text-lg font-semibold text-text-light mt-1" x-text="classification"></p>
                        <p class="text-sm text-text-dark mt-2">Legenda:</p>
                        <ul class="text-sm text-text-dark ml-4 list-disc mt-1">
                            <li>Muito baixo (NOR entre 0 e 2,1 pontos): alta regularidade; tend√™ncia √† rigidez.</li>
                            <li>Baixo (NOR entre 2,2 e 4,1 pontos): estabilidade no ritmo de produ√ß√£o.</li>
                            <li>M√©dio (NOR entre 4,2 e 8,6 pontos): instabilidade moderada; aceit√°vel, por√©m n√£o ideal.
                            </li>
                            <li>Alto (NOR entre 8,7 e 13,1 pontos): flutua√ß√µes e instabilidade no desempenho.</li>
                            <li>Muito alto (NOR ‚â• 13,2 pontos): grandes varia√ß√µes de rendimento.</li>
                        </ul>
                        <p class="text-sm text-text-dark mt-2"><strong>Observa√ß√£o:</strong> o ideal √© um NOR baixo. Um
                            NOR m√©dio ainda √© aceit√°vel, por√©m n√£o ideal.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="border-t border-gray-800">
        <div class="container mx-auto px-6 py-8 text-center">
            <p class="text-sm text-text-dark">&copy; 2024 Aprova√ß√£o Psycho. Todos os direitos reservados.</p>
            <p class="text-sm mt-2"><a href="https://www.instagram.com/aprovacaopsycho/" target="_blank"
                    rel="noopener noreferrer" style="color:var(--text-light);">
                    <svg class="inline w-4 h-4 mr-2 align-text-bottom" aria-hidden="true">
                        <use xlink:href="assets/icons.svg#icon-instagram"></use>
                    </svg>
                    Instagram: @aprovacaopsycho
                </a></p>
            <p class="text-sm mt-2"><a href="https://www.instagram.com/aprovacaopsycho/" target="_blank"
                    rel="noopener noreferrer" style="color:var(--text-light);">Instagram: @aprovacaopsycho</a></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('norCalculator', () => ({
                intervals: [0, 0, 0, 0, 0],
                totalPalos: 0,
                diffs: [],
                sumDiffs: 0,
                nor: 0,
                classification: '',
                error: null,
                // gamified fields
                friendlyMessage: '',
                score: 0,
                badge: '',
                bannerClass: 'bg-white/5 border border-white/5',
                progressClass: 'bg-green-400',
                compute() {
                    this.error = null;
                    this.intervals = this.intervals.map(v => { v = Number(v); return isNaN(v) || v < 0 ? 0 : v; });
                    this.totalPalos = this.intervals.reduce((s, n) => s + n, 0);
                    if (this.totalPalos <= 0) {
                        this.diffs = [];
                        this.sumDiffs = 0;
                        this.nor = 0;
                        this.classification = '';
                        this.friendlyMessage = '';
                        this.score = 0;
                        this.badge = '';
                        this.bannerClass = 'bg-white/5 border border-white/5';
                        this.progressClass = 'bg-green-400';
                        this.error = 'Insira valores positivos para o total de palos.';
                        return;
                    }
                    this.diffs = [];
                    for (let i = 0; i < this.intervals.length - 1; i++) {
                        this.diffs.push(Math.abs(this.intervals[i + 1] - this.intervals[i]));
                    }
                    this.sumDiffs = this.diffs.reduce((s, n) => s + n, 0);
                    this.nor = (this.sumDiffs * 100) / this.totalPalos;
                    const n = this.nor;
                    if (n <= 2.1) {
                        this.classification = 'Muito baixo (0‚Äì2,1 pontos)';
                        this.friendlyMessage = 'üèÜ Muito baixo ‚Äî alta regularidade, sem oscila√ß√µes bruscas.';
                        this.badge = 'üèÜ';
                        this.bannerClass = 'bg-green-500/10 border-l-4 border-green-500';
                        this.progressClass = 'bg-green-400';
                    } else if (n <= 4.1) {
                        this.classification = 'Baixo (2,2‚Äì4,1 pontos)';
                        this.friendlyMessage = '‚≠ê Baixo ‚Äî estabilidade no ritmo de produ√ß√£o.';
                        this.badge = '‚≠ê';
                        this.bannerClass = 'bg-green-400/10 border-l-4 border-yellow-400';
                        this.progressClass = 'bg-yellow-400';
                    } else if (n <= 8.6) {
                        this.classification = 'M√©dio (4,2‚Äì8,6 pontos)';
                        this.friendlyMessage = '‚ÑπÔ∏è M√©dio ‚Äî adapt√°vel, aceit√°vel, por√©m n√£o ideal.';
                        this.badge = '‚ÑπÔ∏è';
                        this.bannerClass = 'bg-yellow-500/10 border-l-4 border-yellow-500';
                        this.progressClass = 'bg-orange-400';
                    } else if (n <= 13.1) {
                        this.classification = 'Alto (8,7‚Äì13,1 pontos)';
                        this.friendlyMessage = '‚ö†Ô∏è Alto ‚Äî flutua√ß√µes e instabilidade no desempenho.';
                        this.badge = '‚ö†Ô∏è';
                        this.bannerClass = 'bg-orange-500/10 border-l-4 border-orange-500';
                        this.progressClass = 'bg-orange-500';
                    } else {
                        this.classification = 'Muito alto (‚â•13,2 pontos)';
                        this.friendlyMessage = 'üî• Muito alto ‚Äî grandes varia√ß√µes de rendimento.';
                        this.badge = 'üî•';
                        this.bannerClass = 'bg-red-500/10 border-l-4 border-red-500';
                        this.progressClass = 'bg-red-400';
                    }
                    // Score: map NOR (0..20+) to 0..100 where lower NOR => higher score
                    this.score = Math.max(0, Math.min(100, Math.round(100 - (this.nor / 20) * 100)));
                },
                reset() { this.intervals = [0, 0, 0, 0, 0]; this.totalPalos = 0; this.diffs = []; this.sumDiffs = 0; this.nor = 0; this.classification = ''; this.error = null; this.friendlyMessage = ''; this.score = 0; this.badge = ''; this.bannerClass = 'bg-white/5 border border-white/5'; this.progressClass = 'bg-green-400'; }
            }));
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            menuBtn?.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        });
    </script>

</body>

</html>
